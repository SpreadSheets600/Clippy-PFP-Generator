<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Clippy PFP Generator ‚Äì Make your own Clippy Avatar</title>
		<meta name="description" content="Generate a custom Clippy profile picture (PFP) by mixing & matching backgrounds, bodies, heads, eyes, hands, mouths, and decorations." />
		<meta property="og:title" content="Clippy PFP Generator" />
		<meta property="og:description" content="Make your Clippy avatar in seconds. Randomize, tweak, download." />
		<meta property="og:type" content="website" />
		<meta name="theme-color" content="#0ea5e9" media="(prefers-color-scheme: light)" />
		<meta name="theme-color" content="#0c4a6e" media="(prefers-color-scheme: dark)" />
		<!-- Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-6LL3FGD40D"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());
			gtag("config", "G-6LL3FGD40D");
		</script>
		<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8961022512973950" crossorigin="anonymous"></script>
		<!-- Tailwind CSS CDN (no build step) -->
		<script src="https://cdn.tailwindcss.com"></script>
		<script>
			tailwind.config = {
				darkMode: "class",
				theme: {
					extend: {
						fontFamily: { sans: ["Inter", "system-ui", "Arial", "sans-serif"] },
						boxShadow: { glow: "0 0 0 1px rgba(255,255,255,0.05), 0 2px 10px -2px rgba(0,0,0,0.4), 0 4px 32px -4px rgba(0,0,0,0.5)" },
						backgroundImage: { checker: "repeating-conic-gradient(#d4d4d8 0% 25%, #f4f4f5 0% 50%)" },
					},
				},
			};
		</script>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
		<!-- No custom CSS, all styling via Tailwind classes -->
		<style>
			@keyframes slideIn {
				from {
					opacity: 0;
					transform: translateY(10px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}
		</style>
	</head>
	<body class="min-h-screen bg-gradient-to-br from-sky-100/80 via-white to-cyan-100/80 dark:from-slate-900 dark:via-slate-950 dark:to-slate-900 text-slate-800 dark:text-slate-200 font-sans antialiased selection:bg-sky-600/70 selection:text-white">
		<header class="sticky top-0 z-40 bg-white/80 dark:bg-slate-900/80 backdrop-blur border-b border-slate-200 dark:border-slate-800 shadow-sm">
			<div class="max-w-4xl mx-auto px-4 py-3 flex items-center gap-4">
				<div class="flex items-center gap-2 font-bold text-xl tracking-tight">
					<span class="text-sky-500">üìé</span>
					<span>Clippy PFP Generator</span>
				</div>
				<div class="ml-auto flex items-center gap-2">
					<button id="themeToggle" class="rounded-lg px-3 py-1.5 text-base font-medium bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400" aria-label="Toggle dark mode">üåô</button>
				</div>
			</div>
		</header>

		<main class="max-w-6xl mx-auto px-4 py-8 flex flex-col gap-8">
			<!-- Hero -->
			<section class="text-center max-w-3xl mx-auto flex flex-col gap-6">
				<div class="flex items-end justify-center gap-4 mb-2">
					<div class="w-14 h-14 sm:w-16 sm:h-16 rounded-2xl flex items-center justify-center text-3xl sm:text-4xl shadow-lg leading-none">üìé</div>
					<h1 class="text-4xl sm:text-5xl md:text-6xl font-black bg-gradient-to-r from-sky-600 via-sky-500 to-cyan-500 dark:from-sky-300 dark:via-cyan-300 dark:to-sky-200 bg-clip-text text-transparent leading-[1.05] pb-1">Clippy Builder</h1>
				</div>
				<p class="text-xl text-slate-600 dark:text-slate-400 leading-relaxed">Create your perfect Clippy avatar with our intuitive builder. Mix parts, randomize styles, and join the Clippy Movement!</p>

				<!-- (Quick Actions moved below preview) -->
			</section>

			<!-- Builder Layout -->
			<section class="grid xl:grid-cols-3 lg:grid-cols-2 md:grid-cols-2 gap-8 items-start">
				<!-- Canvas & Preview Card -->
				<div class="xl:col-span-1 flex flex-col gap-6">
					<div class="relative group">
						<div class="absolute -inset-2 rounded-3xl bg-gradient-to-br from-sky-400/30 via-cyan-300/30 to-sky-500/30 blur-xl opacity-0 group-hover:opacity-100 transition-all duration-500"></div>
						<div class="relative rounded-3xl bg-white/95 dark:bg-slate-800/95 shadow-2xl border border-slate-200/50 dark:border-slate-700/50 overflow-hidden">
							<!-- Canvas Header -->
							<div class="bg-gradient-to-r from-sky-50 to-cyan-50 dark:from-slate-800 dark:to-slate-700 px-6 py-4 border-b border-slate-200 dark:border-slate-700">
								<h3 class="font-bold text-lg text-slate-800 dark:text-slate-200 flex items-center gap-2">
									<span class="w-2 h-2 bg-green-500 rounded-full"></span>
									Live Preview
								</h3>
								<p class="text-sm text-slate-600 dark:text-slate-400 mt-1">512√ó512 PNG ‚Ä¢ Layers stacked in order</p>
							</div>
							<!-- Canvas Container -->
							<div class="p-6 sm:p-8 flex flex-col items-center gap-6">
								<canvas id="preview" width="512" height="512" class="w-full max-w-[16rem] sm:max-w-[20rem] md:max-w-[22rem] aspect-square rounded-2xl ring-4 ring-sky-100 dark:ring-sky-900 bg-[repeating-conic-gradient(theme(colors.slate.200)_0%_25%,theme(colors.slate.50)_0%_50%)] [background-size:24px_24px] shadow-lg hover:shadow-2xl transition-shadow duration-300"></canvas>
								<div class="flex flex-wrap justify-center gap-3 w-full">
									<button id="randomize" class="group inline-flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-bold bg-gradient-to-r from-sky-600 to-sky-500 text-white hover:from-sky-500 hover:to-sky-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"><span class="group-hover:animate-spin">üé≤</span><span>Randomize</span></button>
									<button id="clear" class="inline-flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-semibold bg-slate-100 text-slate-800 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200">üóëÔ∏è <span>Reset</span></button>
									<button id="download" class="group inline-flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-bold bg-gradient-to-r from-cyan-600 to-cyan-500 text-white hover:from-cyan-500 hover:to-cyan-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"><span>‚¨áÔ∏è</span><span>Download</span></button>
								</div>
							</div>
						</div>
					</div>

					<!-- (Tips card moved to full-width section below) -->
				</div>

				<!-- Builder Controls -->
				<div class="xl:col-span-2 flex flex-col gap-6">
					<!-- Category Tabs -->
					<div class="bg-white/80 dark:bg-slate-800/80 backdrop-blur rounded-2xl border border-slate-200 dark:border-slate-700 p-6 shadow-lg">
						<h3 class="font-bold text-xl text-slate-800 dark:text-slate-200 mb-4 flex items-center gap-2">üé® Customize Parts</h3>
						<nav id="tabs" class="flex flex-wrap gap-3" aria-label="Asset categories"></nav>
					</div>

					<!-- Asset Thumbnails -->
					<div id="thumbs-container" class="flex flex-col gap-6"></div>
				</div>
			</section>

			<!-- Pro Tips Full-Width Section -->
			<section class="mt-10 rounded-3xl bg-gradient-to-br from-blue-50 via-indigo-50 to-sky-50 dark:from-slate-800/80 dark:via-slate-800/70 dark:to-slate-700/70 border border-blue-200/60 dark:border-slate-600 shadow-lg p-8">
				<div class="max-w-5xl mx-auto">
					<h3 class="text-2xl font-black text-blue-900 dark:text-blue-200 mb-4 flex items-center gap-3"><span>üí°</span>Pro Tips</h3>
					<ul class="grid sm:grid-cols-3 gap-6 text-sm">
						<li class="flex items-start gap-3 bg-white/60 dark:bg-slate-700/40 rounded-xl p-4 border border-blue-200/50 dark:border-slate-600 backdrop-blur-sm shadow-sm">
							<span class="text-blue-500">‚å®Ô∏è</span>
							<span class="text-blue-900 dark:text-blue-200">Use shortcuts: <strong>R</strong> randomize, <strong>C</strong> clear</span>
						</li>
						<li class="flex items-start gap-3 bg-white/60 dark:bg-slate-700/40 rounded-xl p-4 border border-blue-200/50 dark:border-slate-600 backdrop-blur-sm shadow-sm">
							<span class="text-blue-500">‚û°Ô∏è</span>
							<span class="text-blue-900 dark:text-blue-200">Use arrow keys to switch part categories quickly</span>
						</li>
						<li class="flex items-start gap-3 bg-white/60 dark:bg-slate-700/40 rounded-xl p-4 border border-blue-200/50 dark:border-slate-600 backdrop-blur-sm shadow-sm">
							<span class="text-blue-500">üß©</span>
							<span class="text-blue-900 dark:text-blue-200">Body required; all other layers are optional ‚Äî experiment!</span>
						</li>
					</ul>
				</div>
			</section>

			<!-- Video Section -->
			<section class="rounded-3xl bg-gradient-to-br from-violet-50 to-purple-50 dark:from-slate-800/80 dark:to-slate-700/80 border border-violet-200 dark:border-slate-600 shadow-xl p-8 flex flex-col gap-6 mt-8">
				<div class="text-center">
					<h3 class="mx-2 sm:mx-6 text-lg sm:text-xl md:text-2xl font-black text-violet-900 dark:text-violet-200 mb-3 flex items-center justify-center gap-2 sm:gap-3">
						<span>ü§î</span>
						<span>Why is everyone changing their profile picture to Clippy and why you should too!</span>
					</h3>
				</div>
				<div class="relative w-full overflow-hidden rounded-2xl aspect-video ring-2 ring-violet-200 dark:ring-violet-800 shadow-2xl hover:shadow-3xl transition-shadow duration-300">
					<iframe class="w-full h-full" src="https://www.youtube.com/embed/2_Dtmpe9qaQ" title="Why everyone is changing to Clippy" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
				</div>
			</section>
		</main>

		<footer class="py-10 text-center text-xs text-slate-500 dark:text-slate-500 flex flex-col gap-2 mt-8">
			<p>Built with nostalgia ‚Ä¢ Not affiliated with Microsoft ‚Ä¢ PNG assets layered client-side</p>
		</footer>

		<script>
			(() => {
				const folders = ["bg", "body", "head", "eyes", "mouth", "hand", "deco"];
				const emojiMap = { bg: "üñºÔ∏è", body: "üìé", head: "üòÄ", eyes: "üëÄ", mouth: "üëÑ", hand: "‚úã", deco: "‚ú®" };
				const selections = {};
				let options = {};
				const state = { activeFolder: folders[0] };

				const canvas = document.getElementById("preview");
				const ctx = canvas.getContext("2d");
				const tabsEl = document.getElementById("tabs");
				const clearBtn = document.getElementById("clear");
				const downloadBtn = document.getElementById("download");
				const randomizeBtn = document.getElementById("randomize");
				const themeToggle = document.getElementById("themeToggle");
				const panelsEl = document.getElementById("thumbs-container");

				const THEME_KEY = "clippy_theme";
				function applyTheme(t) {
					const root = document.documentElement;
					const isDark = t === "dark" || (t === "auto" && matchMedia("(prefers-color-scheme: dark)").matches);
					root.classList.toggle("dark", isDark);
					themeToggle.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
					localStorage.setItem(THEME_KEY, isDark ? "dark" : "light");
				}
				themeToggle.addEventListener("click", () => {
					applyTheme(document.documentElement.classList.contains("dark") ? "light" : "dark");
				});
				applyTheme(localStorage.getItem(THEME_KEY) || "auto");

				fetch("manifest.json")
					.then((r) => r.json())
					.then((data) => {
						options = data;
						init();
					})
					.catch((err) => {
						console.error("Failed to load manifest:", err);
						panelsEl.innerHTML = '<div class="text-red-600 dark:text-red-400">Error loading assets manifest.</div>';
					});

				function init() {
					initDefaults();
					renderTabs();
					renderPanels();
					draw();
				}

				function initDefaults() {
					folders.forEach((f) => (selections[f] = f === "body" ? options[f][0] : null));
				}

				// ---------- UI helper class builders ----------
				function tabClass(folder, active) {
					const base = "group inline-flex items-center gap-1.5 rounded-lg px-3.5 py-1.5 text-xs md:text-sm font-semibold tracking-wide transition-all duration-150 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400";
					if (active) return base + " bg-sky-600 text-white shadow-sm ring-1 ring-sky-500 scale-[1.05]";
					return base + " bg-slate-100/80 dark:bg-slate-700/70 text-slate-700 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600 hover:shadow";
				}

				function thumbClass(folder, selected) {
					const base = `thumb-tile group relative aspect-square flex items-center justify-center rounded-xl border-2 transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400`;
					if (selected) return base + " border-sky-500 dark:border-sky-400 bg-sky-50 dark:bg-sky-900/20 ring-4 ring-sky-200 dark:ring-sky-800 shadow-xl scale-105";
					return base + " border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800/60 hover:border-sky-400 dark:hover:border-sky-500 hover:shadow-lg hover:scale-105";
				}

				function renderTabs() {
					tabsEl.innerHTML = "";
					folders.forEach((f) => {
						const active = f === state.activeFolder;
						const btn = document.createElement("button");
						btn.type = "button";
						btn.className = tabClass(f, active);
						btn.setAttribute("role", "tab");
						btn.setAttribute("aria-selected", active);
						btn.dataset.folder = f;
						const emoji = document.createElement("span");
						emoji.textContent = emojiMap[f];
						const label = document.createElement("span");
						label.textContent = f.charAt(0).toUpperCase() + f.slice(1);
						btn.append(emoji, label);
						btn.addEventListener("click", () => switchFolder(f));
						tabsEl.appendChild(btn);
					});
				}

				function renderPanels() {
					panelsEl.innerHTML = "";
					folders.forEach((f) => {
						const wrapper = document.createElement("div");
						wrapper.className = `bg-white/90 dark:bg-slate-800/90 backdrop-blur rounded-2xl border border-slate-200 dark:border-slate-700 shadow-lg overflow-hidden ${f === state.activeFolder ? "" : "hidden"}`;
						const header = document.createElement("div");
						header.className = "bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-600 px-5 py-3 border-b border-slate-200 dark:border-slate-600";
						header.innerHTML = `<h4 class='font-semibold text-sm md:text-base text-slate-800 dark:text-slate-200 flex items-center gap-2'><span>${emojiMap[f]}</span><span>${f.charAt(0).toUpperCase() + f.slice(1)} Options</span><span class='ml-auto text-xs font-normal text-slate-500 dark:text-slate-400'>${options[f] ? options[f].length + (f !== "body" ? 1 : 0) : 0} choices</span></h4>`;
						const panel = document.createElement("div");
						panel.id = `panel-${f}`;
						panel.setAttribute("role", "tabpanel");
						panel.className = "thumbs grid gap-6 grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 max-h-[20rem] overflow-y-auto p-6";
						if (f !== "body") panel.appendChild(createThumb({ folder: f, file: null }));
						if (options[f]) options[f].forEach((file) => panel.appendChild(createThumb({ folder: f, file })));
						wrapper.append(header, panel);
						panelsEl.appendChild(wrapper);
					});
				}

				function createThumb({ folder, file }) {
					const tile = document.createElement("button");
					tile.type = "button";
					const selected = (selections[folder] || "") === (file || "");
					tile.className = thumbClass(folder, selected);
					tile.dataset.folder = folder;
					tile.dataset.file = file || "";
					tile.setAttribute("data-selected", selected);
					tile.setAttribute("aria-label", file ? `${folder} asset ${file}` : `${folder} none`);
					tile.title = file || "None";
					if (!file) {
						const noneBox = document.createElement("div");
						noneBox.className = "w-full h-full bg-[repeating-conic-gradient(theme(colors.slate.300)_0%_25%,theme(colors.slate.100)_0%_50%)] dark:bg-[repeating-conic-gradient(theme(colors.slate.600)_0%_25%,theme(colors.slate.700)_0%_50%)] [background-size:16px_16px] rounded-lg flex items-center justify-center";
						noneBox.innerHTML = '<span class="text-slate-400 dark:text-slate-500 text-xs font-semibold">NONE</span>';
						tile.appendChild(noneBox);
					} else {
						const imgWrap = document.createElement("div");
						imgWrap.className = "w-full h-full p-4 flex items-center justify-center";
						const img = new Image();
						img.decoding = "async";
						img.loading = "lazy";
						img.src = `assets/${folder}/${file}`;
						img.alt = `${folder} - ${file}`;
						img.className = "max-w-full max-h-full object-contain pointer-events-none select-none group-hover:scale-125 transition-transform duration-300";
						imgWrap.appendChild(img);
						tile.appendChild(imgWrap);
						const indicator = document.createElement("div");
						indicator.className = `absolute -top-1 -right-1 w-6 h-6 rounded-full ${selected ? "bg-sky-500 text-white" : "bg-slate-300 text-slate-600 opacity-0 group-hover:opacity-100"} flex items-center justify-center text-xs font-bold transition-all duration-200`;
						indicator.innerHTML = selected ? "‚úì" : "+";
						tile.appendChild(indicator);
					}
					tile.addEventListener("click", () => {
						selections[folder] = file;
						updateSelectionUI(folder);
						draw();
					});
					return tile;
				}

				function updateSelectionUI(folder) {
					document.querySelectorAll(`.thumb-tile[data-folder='${folder}']`).forEach((el) => {
						const file = el.dataset.file || "";
						const sel = (selections[folder] || "") === file;
						el.className = thumbClass(folder, sel);
						el.setAttribute("data-selected", sel);
						const indicator = el.querySelector(".absolute");
						if (indicator) {
							indicator.className = `absolute -top-1 -right-1 w-6 h-6 rounded-full ${sel ? "bg-sky-500 text-white" : "bg-slate-300 text-slate-600 opacity-0 group-hover:opacity-100"} flex items-center justify-center text-xs font-bold transition-all duration-200`;
							indicator.innerHTML = sel ? "‚úì" : "+";
						}
					});
				}

				function switchFolder(folder) {
					state.activeFolder = folder;
					document.querySelectorAll('#tabs [role="tab"]').forEach((tab) => {
						const active = tab.dataset.folder === folder;
						tab.setAttribute("aria-selected", active);
						tab.className = tabClass(tab.dataset.folder, active);
					});
					document.querySelectorAll('[role="tabpanel"]').forEach((panel) => {
						const wrap = panel.parentElement;
						const active = panel.id === `panel-${folder}`;
						wrap.classList.toggle("hidden", !active);
						if (active) wrap.style.animation = "slideIn .25s ease-out";
					});
				}

				function draw() {
					ctx.clearRect(0, 0, canvas.width, canvas.height);
					(async () => {
						for (const folder of folders) {
							const file = selections[folder];
							if (!file) continue;
							await loadAndDraw(`assets/${folder}/${file}`);
						}
					})();
				}

				function loadAndDraw(src) {
					return new Promise((resolve, reject) => {
						const img = new Image();
						img.onload = () => {
							ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
							resolve();
						};
						img.onerror = reject;
						img.src = src;
					});
				}

				function randomChoice(arr) {
					return arr[Math.floor(Math.random() * arr.length)];
				}

				randomizeBtn.addEventListener("click", () => {
					folders.forEach((f) => {
						if (f === "body") {
							selections[f] = randomChoice(options[f]);
						} else {
							const opts = [null, ...options[f]];
							selections[f] = randomChoice(opts);
						}
						updateSelectionUI(f);
					});
					draw();
				});

				clearBtn.addEventListener("click", () => {
					folders.forEach((f) => (selections[f] = f === "body" ? options[f][0] : null));
					folders.forEach(updateSelectionUI);
					draw();
				});

				downloadBtn.addEventListener("click", () => {
					const a = document.createElement("a");
					a.download = `clippy_pfp_${Date.now()}.png`;
					a.href = canvas.toDataURL("image/png");
					a.click();
				});

				document.addEventListener("keydown", (e) => {
					if (e.target.closest("input,textarea")) return;
					if (e.key === "r") {
						randomizeBtn.click();
					}
					if (e.key === "c") {
						clearBtn.click();
					}
					if (e.key === "ArrowRight" || e.key === "ArrowLeft") {
						const idx = folders.indexOf(state.activeFolder);
						const delta = e.key === "ArrowRight" ? 1 : -1;
						const next = folders[(idx + delta + folders.length) % folders.length];
						switchFolder(next);
					}
				});
			})();
		</script>
	</body>
</html>
